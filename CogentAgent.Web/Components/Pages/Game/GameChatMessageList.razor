<div class="message-list-container">
    @foreach (var message in Messages)
    {
        <ChatMessageItem @key="@message" Message="@message" />
    }

    @if (InProgressMessage is not null)
    {
        <ChatMessageItem Message="@InProgressMessage" InProgress="true" />
        <LoadingSpinner />
    }
    else if (IsEmpty)
    {
        <div class="no-messages">@NoMessagesContent</div>
    }
</div>

@code {
    [Parameter]
    public required IEnumerable<ChatMessage> Messages { get; set; }

    [Parameter]
    public ChatMessage? InProgressMessage { get; set; }

    [Parameter]
    public RenderFragment? NoMessagesContent { get; set; }

    private bool IsEmpty => !Messages.Any(m => (m.Role == ChatRole.User || m.Role == ChatRole.Assistant) && !string.IsNullOrEmpty(m.Text));
}
